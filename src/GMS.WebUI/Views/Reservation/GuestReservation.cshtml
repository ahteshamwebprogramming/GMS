@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Guest Registration";
}
@model GMS.Infrastructure.ViewModels.Guests.GuestsListViewModel
<link href="~/customcss/common.css" rel="stylesheet" />
<link href="~/customcss/guestreservation.css" rel="stylesheet" />
<div class="admin_wrapper">
    @Html.Partial("_crm/_leftNavigationCRM")
    <div class="right_container">
        <div class="filtered_rooms_container">
            <div class="therapiesList_table_list">
                <div class="title_area">
                    <h2>Add Guest</h2>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="add_user_form" id="AddGuestForm">
                            <!-- All your existing form content goes here -->
                            <!-- Copy everything from the modal-body div (including all hidden inputs and form blocks) -->
                            <!-- This includes all the PERSONAL INFORMATION, CONTACT INFORMATION, etc. sections -->
                            <!-- Make sure to keep all the existing IDs and classes -->
                            <!-- Example of one section (you should include ALL sections from your modal): -->
                            <!-- Continue with all other hidden inputs -->
                            @* input fields from page vm *@
                            <input type="hidden" asp-for="GuestReservationRouteValues.PageSource" />
                            <input type="hidden" asp-for="GuestReservationRouteValues.RoomNumber" />
                            <input type="hidden" asp-for="GuestReservationRouteValues.RoomType" />

                            <div id="div_GuestReservationForm_PartialView">
                                @Html.Partial("_guestReservation/_guestReservationForm", Model)
                            </div>




                            <!-- Include all other rows and form sections -->

                        </div>
                    </div>
                    @*  <div class="card-footer">
                        <a href="/Reservation/GuestsList" class="btn btn-secondary">Cancel</a>
                        <input type="button" class="btn btn-primary" onclick="AddGuests()" value="Save and Continue">
                    </div> *@
                </div>

            </div>
        </div>
    </div>


    @Html.Partial("_bottomNavigation1")
</div>

@section Styles {
    <style>
        .full-page-form {
            padding: 20px;
            width: 100%;
        }

        .standalone-form {
            border: none;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        .modal-header {
            background: #61a39f;
            color: white;
            border-radius: 8px 8px 0 0;
            padding: 15px 20px;
        }

        .modal-body {
            padding: 20px;
            max-height: none;
            overflow-y: visible;
        }

        .formBlock {
            margin-bottom: 20px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #61a39f;
        }

        .formTitle {
            color: #61a39f;
            margin-bottom: 15px;
            font-size: 16px;
        }
    </style>
}

@section Scripts {
    <script src="~/customjs/guestreservation/guestreservation.js" asp-append-version="true"></script>
    <script src="~/customjs/guestreservation/GuestsSearch.js" asp-append-version="true"></script>
    <script src="~/customjs/guestreservation/RatePlans.js" asp-append-version="true"></script>
    <script src="~/customjs/guestreservation/addguest.js" asp-append-version="true"></script>
    <script src="~/customjs/guestreservation/GuestTabs.js" asp-append-version="true"></script>
    @* <script src="~/customjs/guests/addguest.js"></script> *@
    <!-- Include any other necessary scripts that were used in the modal -->

    <script>

        $(document).ready(function() {


            let GroupId = "";let PAXSno="";

            GroupId = $("#AddGuestForm").find("[name='MemberDetail.GroupId']").val();
            PAXSno = $("#AddGuestForm").find("[name='hdnPAXSnoFromController']").val();

             //AddGuestsPartialView(GroupId,PAXSno);
             AddGuestsPartialView(GroupId,PAXSno);

            // Initialize tabs


            // Store the active tab in localStorage when changed
            // $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
            //     localStorage.setItem('activeGuestTab', $(e.target).attr('href'));
            // });

            // Retrieve the active tab from localStorage on page load
            // var activeTab = localStorage.getItem('activeGuestTab');
            // if (activeTab) {
            //     $('#guestFormTabs a[href="' + activeTab + '"]').tab('show');
            // }
        });
        // Initialize any datepickers, select2, etc.
        $(document).ready(function() {



            // // Initialize date pickers
            // $('.dateonly').datepicker({
            //     format: 'dd-mm-yyyy',
            //     autoclose: true
            // });

            // $('.datetimeonly').datetimepicker({
            //     format: 'DD-MM-YYYY HH:mm'
            // });



            // Initialize other plugins as needed
        });



    </script>
}