@{
    //Layout = "~/Views/Shared/_Layout.cshtml";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Booking List";
}

<link href="~/customcss/channelmanager/main.css" rel="stylesheet" />

<style>
    .tab-content {
        display: inherit !important;
        border: 1px solid #fff !important;
        padding: 0;
        background: #fff;
    }

    .nav-tabs .nav-link {
        margin-bottom: -1px;
        background: 0 0;
        border: 1px solid #6f6f6f14;
        border-top-left-radius: 12px;
        border-top-right-radius: 12px;
        margin-right: 10px;
    }

        .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
            color: #ffffff;
            background-color: #002366;
            border-color: #dee2e6 #dee2e6 #fff;
        }

    .toggle-container {
        display: inline-block;
        vertical-align: middle;
    }

    .toggle-checkbox {
        display: none;
    }

    .toggle-label {
        position: relative;
        display: block;
        width: 40px;
        height: 20px;
        background-color: #ccc;
        border-radius: 20px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .toggle-circle {
        position: absolute;
        top: 2px;
        left: 2px;
        width: 16px;
        height: 16px;
        background-color: white;
        border-radius: 50%;
        transition: transform 0.3s;
    }

    .toggle-checkbox:checked + .toggle-label {
        background-color: #28a745;
    }

        .toggle-checkbox:checked + .toggle-label .toggle-circle {
            transform: translateX(20px);
        }

    .ratesUpdated input {
        border: #eccccc solid 1px;
    }

    .preloader {
        background-color: transparent;
    }

    .blockUI.blockMsg.blockPage {
        position: sticky !important;
    }






    .day-checkboxes {
        display: flex;
        /* flex-wrap: wrap; */
        gap: 8px;
        margin-top: 5px;
    }

    .day-checkbox {
        display: flex;
        align-items: center;
        gap: 4px;
        white-space: nowrap;
    }

        .day-checkbox input[type="checkbox"] {
            margin: 0;
        }
</style>


@model GMS.Infrastructure.ViewModels.Rooms.BulkUpdateViewModel
@using GMS.Infrastructure.ViewModels.Rooms
@{
    var days = (Model.ToDate - Model.FromDate).Days + 1;
    if (days > 365) { days = 365; Model.ToDate = Model.FromDate.AddDays(364); }
}
<div class="admin_wrapper">
    @Html.Partial("_services/_leftNavigationServices")
    <div class="right_container">


        <!-- filtered rooms Start-->
        <div class="filtered_rooms_container">
            <div class="therapiesList_table_list">
                <div class="title_area">
                    <h2>Rate & Inventory <span>Bulk Update</span></h2>
                </div>


                <div class="tabs_content">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">Rack Rate</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tab_PR-tab" data-bs-toggle="tab" data-bs-target="#tab_PR" type="button" role="tab">Package Rate</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">Inventory</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab">Increment</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tab4-tab" data-bs-toggle="tab" data-bs-target="#tab4" type="button" role="tab">Restrictions</button>
                        </li>
                    </ul>

                    <div class="tab-content mt-3" id="myTabContent">

                        <!-- Rack Rate Tab -->
                        <div class="tab-pane fade show active" id="tab1" role="tabpanel">
                            <div class="text-left d-flex title2 mb-2 justify-content-start">
                                <div class="controlsForm" name="SelectPlanDiv">
                                    <label>Select Plan</label>
                                    <select class="form-control" name="ChannelId" id="channelId">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                // <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    if (item.Readonly == true)
                                                    {
                                                        <option value="@item.Id" selected>@item.Service</option>
                                                    }
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm">
                                    <label>From Date</label>
                                    <input type="date" class="form-control" name="FromDate" id="fromDate"
                                           value="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           min="@DateTime.Today.ToString("yyyy-MM-dd")" onchange="updateDateRange('tab1')" />
                                </div>
                                <div class="controlsForm">
                                    <label>To Date</label>
                                    <input type="date" class="form-control" name="ToDate" id="toDate"
                                           value="@Model.ToDate.ToString("yyyy-MM-dd")"
                                           min="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           max="@Model.FromDate.AddDays(364).ToString("yyyy-MM-dd")" onchange="updateDateRange('tab1')" />
                                </div>
                                <div class="controlsForm" name="CopyFromDiv" style="display:none">
                                    <label>Copy From</label>
                                    <select class="form-control" name="CopyFrom" id="CopyFrom">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    <option value="@item.Id">@item.Service</option>
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm" name="CopyFromButton" style="display:none">
                                    <input type="button" class="btn btn-primary" value="Copy" style="margin-top:24px;width:inherit" onclick="CopyRates()" />
                                </div>
                            </div>
                            <form id="ratesForm" method="post" action="/Rooms/UpdateBulk">
                                <input type="hidden" name="ChannelId" value="@Model.ChannelId" />
                                <input type="hidden" id="ratesFromDate" name="FromDate" value="@Model.FromDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" id="ratesToDate" name="ToDate" value="@Model.ToDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" name="activeTab" value="tab1" />
                                <div class="resposive_table">
                                    <table class="ratesUpdated w-100 table" width="100%">
                                        <thead class="table-dark">
                                            <tr>
                                                <th><input type="checkbox" id="selectAllRates" onclick="toggleSelectAll('ratesForm', this.checked)"></th>
                                                <th>Rooms Category</th>
                                                <th>Minimum Rate</th>
                                                <th>Maximum Rate</th>
                                                <th>Sale Rate</th>
                                                <th>Cancellation Days</th>
                                                <th>Stop Sell</th>
                                                <th>Close on Arrival</th>
                                                <th>Restrict Stay</th>
                                                <th>Minimum Nights</th>
                                                <th>Maximum Nights</th>
                                            </tr>
                                        </thead>
                                        <tbody id="ratesTableBody"></tbody>
                                    </table>
                                </div>
                                <button type="submit" class="btn btn-primary mt-2">Update Selected Rates</button>
                            </form>
                        </div>

                        <!-- Package Rate Tab -->
                        <div class="tab-pane fade" id="tab_PR" role="tabpanel">
                            <div class="text-left d-flex title2 mb-2 justify-content-start">
                                <div class="controlsForm" name="SelectPlanDiv">
                                    <label>Select Plan</label>
                                    <select class="form-control" name="ChannelId" id="channelId">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    if (item.Readonly == false)
                                                    {
                                                        <option value="@item.Id">@item.Service</option>
                                                    }
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm">
                                    <label>From Date</label>
                                    <input type="date" class="form-control" name="FromDate" id="fromDate"
                                           value="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           min="@DateTime.Today.ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>
                                <div class="controlsForm">
                                    <label>To Date</label>
                                    <input type="date" class="form-control" name="ToDate" id="toDate"
                                           value="@Model.ToDate.ToString("yyyy-MM-dd")"
                                           min="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           max="@Model.FromDate.AddDays(364).ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>

                                <div class="controlsForm" style="width:inherit">
                                    <label>Days of Week</label>
                                    <div class="day-checkboxes">
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="All" checked> All</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Monday" checked> Mo</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Tuesday" checked> Tu</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Wednesday" checked> We</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Thursday" checked> Th</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Friday" checked> Fr</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Saturday" checked> Sa</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Sunday" checked> Su</label>
                                    </div>
                                </div>
                                <div class="controlsForm" name="CopyFromDiv" style="display:none;margin-left:5%;">
                                    <label>Copy From</label>
                                    <select class="form-control" name="CopyFrom" id="CopyFrom">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    <option value="@item.Id">@item.Service</option>
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm" name="CopyFromButton" style="display:none">
                                    <input type="button" class="btn btn-primary" value="Copy" style="margin-top:24px;width:inherit" onclick="CopyRates()" />
                                </div>
                            </div>
                            <form id="ratesForm" method="post" action="/Rooms/UpdateBulk">
                                <input type="hidden" name="ChannelId" value="@Model.ChannelId" />
                                <input type="hidden" id="ratesFromDate" name="FromDate" value="@Model.FromDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" id="ratesToDate" name="ToDate" value="@Model.ToDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" name="SelectedDaysList" id="SelectedDaysList" value="" />
                                <input type="hidden" name="activeTab" value="tab_PR" />
                                <div class="resposive_table">
                                    <table class="ratesUpdated w-100 table" width="100%">
                                        <thead class="table-dark">
                                            <tr>
                                                <th><input type="checkbox" id="selectAllRates" onclick="toggleSelectAll('ratesForm', this.checked)"></th>
                                                <th>Rooms Category</th>
                                                <th>Minimum Rate</th>
                                                <th>Maximum Rate</th>
                                                <th>Sale Rate</th>
                                            </tr>
                                        </thead>
                                        <tbody id="packageRatesTableBody"></tbody>
                                    </table>
                                </div>
                                <button type="submit" class="btn btn-primary mt-2">Update Selected Rates</button>
                            </form>
                        </div>


                        <!-- Inventory Tab -->
                       
                        <div class="tab-pane fade" id="tab2" role="tabpanel">
                            
                            <div class="text-left d-flex title2 mb-2 justify-content-start">
                                <div class="controlsForm" name="SelectPlanDiv">
                                    <label>Select Plan</label>
                                    <select class="form-control" name="ChannelId" id="channelId">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    if (item.Readonly == false)
                                                    {
                                                        <option value="@item.Id">@item.Service</option>
                                                    }
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm">
                                    <label>From Date</label>
                                    <input type="date" class="form-control" name="FromDate" id="fromDate"
                                           value="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           min="@DateTime.Today.ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>
                                <div class="controlsForm">
                                    <label>To Date</label>
                                    <input type="date" class="form-control" name="ToDate" id="toDate"
                                           value="@Model.ToDate.ToString("yyyy-MM-dd")"
                                           min="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           max="@Model.FromDate.AddDays(364).ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>

                                <div class="controlsForm" style="width:inherit">
                                    <label>Days of Week</label>
                                    <div class="day-checkboxes">
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="All" checked> All</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Monday" checked> Mo</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Tuesday" checked> Tu</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Wednesday" checked> We</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Thursday" checked> Th</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Friday" checked> Fr</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Saturday" checked> Sa</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Sunday" checked> Su</label>
                                    </div>
                                </div>
                                <div class="controlsForm" name="CopyFromDiv" style="display:none;margin-left:5%;">
                                    <label>Copy From</label>
                                    <select class="form-control" name="CopyFrom" id="CopyFrom">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    <option value="@item.Id">@item.Service</option>
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm" name="CopyFromButton" style="display:none">
                                    <input type="button" class="btn btn-primary" value="Copy" style="margin-top:24px;width:inherit" onclick="CopyRates()" />
                                </div>
                            </div>
                            <form id="inventoryForm" method="post" action="/Rooms/UpdateBulk">
                                <input type="hidden" name="ChannelId" value="@Model.ChannelId" />
                                <input type="hidden" id="inventoryFromDate" name="FromDate" value="@Model.FromDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" id="inventoryToDate" name="ToDate" value="@Model.ToDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" name="SelectedDaysList" id="SelectedDaysList" value="" />
                                <input type="hidden" name="activeTab" value="tab2" />
                                <div class="resposive_table">
                                    <table class="ratesUpdated w-100 table" width="100%">
                                        <thead class="table-dark">
                                            <tr>
                                                <th><input type="checkbox" id="selectAllInventory" onclick="toggleSelectAll('inventoryForm', this.checked)"></th>
                                                <th>Rooms Category</th>
                                                <th>Rooms Count</th>
                                                <th>Rooms Open</th>
                                            </tr>
                                        </thead>
                                        <tbody id="inventoryTableBody"></tbody>
                                    </table>
                                </div>
                                <button type="submit" class="btn btn-primary mt-2">Update Selected</button>
                            </form>
                        </div>



                        <!-- Increment Tab -->
                        <div class="tab-pane fade" id="tab3" role="tabpanel">
                            <div class="text-left d-flex title2 mb-2 justify-content-start">
                                <div class="controlsForm" name="SelectPlanDiv">
                                    <label>Select Plan</label>
                                    <select class="form-control" name="ChannelId" id="channelId">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    if (item.Readonly == false)
                                                    {
                                                        <option value="@item.Id">@item.Service</option>
                                                    }
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm">
                                    <label>From Date</label>
                                    <input type="date" class="form-control" name="FromDate" id="fromDate"
                                           value="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           min="@DateTime.Today.ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>
                                <div class="controlsForm">
                                    <label>To Date</label>
                                    <input type="date" class="form-control" name="ToDate" id="toDate"
                                           value="@Model.ToDate.ToString("yyyy-MM-dd")"
                                           min="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           max="@Model.FromDate.AddDays(364).ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>

                                <div class="controlsForm" style="width:inherit">
                                    <label>Days of Week</label>
                                    <div class="day-checkboxes">
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="All" checked> All</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Monday" checked> Mo</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Tuesday" checked> Tu</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Wednesday" checked> We</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Thursday" checked> Th</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Friday" checked> Fr</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Saturday" checked> Sa</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Sunday" checked> Su</label>
                                    </div>
                                </div>
                                <div class="controlsForm" name="CopyFromDiv" style="display:none;margin-left:5%;">
                                    <label>Copy From</label>
                                    <select class="form-control" name="CopyFrom" id="CopyFrom">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    <option value="@item.Id">@item.Service</option>
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm" name="CopyFromButton" style="display:none">
                                    <input type="button" class="btn btn-primary" value="Copy" style="margin-top:24px;width:inherit" onclick="CopyRates()" />
                                </div>
                            </div>
                            <form id="incrementForm" method="post" action="/Rooms/UpdateBulk">
                                
                                <input type="hidden" name="ChannelId" value="@Model.ChannelId" />
                                <input type="hidden" id="incrementFromDate" name="FromDate" value="@Model.FromDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" id="incrementToDate" name="ToDate" value="@Model.ToDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" name="activeTab" value="tab3" />

                                <div class="resposive_table">
                                    <table class="ratesUpdated w-100 table" width="100%">
                                        <thead class="table-dark">
                                            <tr>
                                                <th><input type="checkbox" id="selectAllIncrement" onclick="toggleSelectAll('incrementForm', this.checked)"></th>
                                                <th>Room Name</th>
                                                <th>Number of Rooms</th>
                                                <th>AT 0%</th>
                                                <th>AT 10%</th>
                                                <th>AT 20%</th>
                                                <th>AT 30%</th>
                                                <th>AT 40%</th>
                                                <th>AT 50%</th>
                                                <th>AT 60%</th>
                                                <th>AT 70%</th>
                                            </tr>
                                        </thead>
                                        <tbody id="incrementTableBody"></tbody>
                                    </table>
                                </div>
                                <button type="submit" class="btn btn-primary mt-2">Save Selected Percentages</button>
                            </form>
                        </div>
                        <!-- Restrictions Tab -->
                        <div class="tab-pane fade" id="tab4" role="tabpanel">
                            <div class="text-left d-flex title2 mb-2 justify-content-start">
                                <div class="controlsForm" name="SelectPlanDiv">
                                    <label>Select Plan</label>
                                    <select class="form-control" name="ChannelId" id="channelId">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    if (item.Readonly == false)
                                                    {
                                                        <option value="@item.Id">@item.Service</option>
                                                    }
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm">
                                    <label>From Date</label>
                                    <input type="date" class="form-control" name="FromDate" id="fromDate"
                                           value="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           min="@DateTime.Today.ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>
                                <div class="controlsForm">
                                    <label>To Date</label>
                                    <input type="date" class="form-control" name="ToDate" id="toDate"
                                           value="@Model.ToDate.ToString("yyyy-MM-dd")"
                                           min="@Model.FromDate.ToString("yyyy-MM-dd")"
                                           max="@Model.FromDate.AddDays(364).ToString("yyyy-MM-dd")" onchange="updateDateRange('tab_PR')" />
                                </div>

                                <div class="controlsForm" style="width:inherit">
                                    <label>Days of Week</label>
                                    <div class="day-checkboxes">
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="All" checked> All</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Monday" checked> Mo</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Tuesday" checked> Tu</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Wednesday" checked> We</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Thursday" checked> Th</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Friday" checked> Fr</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Saturday" checked> Sa</label>
                                        <label class="day-checkbox"><input type="checkbox" name="SelectedDays" value="Sunday" checked> Su</label>
                                    </div>
                                </div>
                                <div class="controlsForm" name="CopyFromDiv" style="display:none;margin-left:5%;">
                                    <label>Copy From</label>
                                    <select class="form-control" name="CopyFrom" id="CopyFrom">
                                        @{
                                            if (Model != null && Model.RatePlansList != null)
                                            {
                                                <option value="0">Select Plan</option>
                                                foreach (var item in Model.RatePlansList)
                                                {
                                                    <option value="@item.Id">@item.Service</option>
                                                }
                                            }
                                        }

                                        <!-- Populate dynamically if needed -->
                                    </select>
                                </div>
                                <div class="controlsForm" name="CopyFromButton" style="display:none">
                                    <input type="button" class="btn btn-primary" value="Copy" style="margin-top:24px;width:inherit" onclick="CopyRates()" />
                                </div>
                            </div>
                            <form id="restrictionsForm" method="post" action="/Rooms/UpdateBulk">
                                <input type="hidden" name="ChannelId" value="@Model.ChannelId" />
                                <input type="hidden" id="restrictionsFromDate" name="FromDate" value="@Model.FromDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" id="restrictionsToDate" name="ToDate" value="@Model.FromDate.ToString("yyyy-MM-dd")" />
                                <input type="hidden" name="activeTab" value="tab4" />
                                <div class="resposive_table">
                                    <table class="ratesUpdated w-100 table" width="100%">
                                        <thead class="table-dark">
                                            <tr>
                                                <th><input type="checkbox" id="selectAllRestrictions" onclick="toggleSelectAll('restrictionsForm', this.checked)"></th>
                                                <th>Rooms Category</th>
                                                <th>Stop Sell</th>
                                                <th>Close on Arrival</th>
                                                <th>Restrict Stay</th>
                                                <th>Minimum Nights</th>
                                                <th>Maximum Nights</th>
                                            </tr>
                                        </thead>
                                        <tbody id="restrictionsTableBody"></tbody>
                                    </table>
                                </div>
                                <button type="submit" class="btn btn-primary mt-2">Update Selected Restrictions</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- filtered rooms end-->
    </div>

    @Html.Partial("_bottomNavigation1")
</div>
@section Scripts {
    <script src="~/customjs/rates/bulkrate.js"></script>
    <script src="~/customjs/rates/CopyBulkRate.js"></script>
    <script type="text/javascript">
         $(document).ready(function () {
            $("#ratesForm").find("[name='ChannelId']").val($("[name='SelectPlanDiv']").find("[name='ChannelId']").val());
            $("div[name='SelectPlanDiv']").find("[name='ChannelId']").change(function () {
                let channelId = this.value;

                $("#myTabContent").find("[name='ChannelId']").val(channelId);
            });
            // $('#tab_PR input[name="SelectedDays"]').on('change', function () {
            //     if ($(this).val() === "All" && $(this).is(':checked')) {
            //         // Check all days when "All" is checked
            //         $('#tab_PR input[name="SelectedDays"]').not('[value="All"]').prop('checked', true);
            //     }
            //     else if ($(this).val() !== "All") {
            //         // Uncheck "All" if any day is unchecked
            //         var allCheckbox = $('#tab_PR input[name="SelectedDays"][value="All"]');
            //         if (allCheckbox.is(':checked')) {
            //             allCheckbox.prop('checked', false);
            //         }
            //     }
                                 
            //     var activeTabId = $('.nav-tabs .nav-link.active').attr('id').replace('-tab', '');
            //     updateSelectedDays(activeTabId);
            // });
            // $("#tab_PR").find("[name='ChannelId']").change(function(){
            //     var activeTabId = $('.nav-tabs .nav-link.active').attr('id').replace('-tab', '');
            //     loadTabData(activeTabId);
            // });
            // Initialize for all tabs
['tab_PR', 'tab1', 'tab2', 'tab3', 'tab4'].forEach(tabId => {
    handleDaySelection(tabId);
    handleChannelChange(tabId);
});


            

        });


        // Function to handle day selection changes for any tab
function handleDaySelection(tabId) {
    $(`#${tabId} input[name="SelectedDays"]`).on('change', function () {
        if ($(this).val() === "All" && $(this).is(':checked')) {
            // Check all days when "All" is checked
            $(`#${tabId} input[name="SelectedDays"]`).not('[value="All"]').prop('checked', true);
        }
        else if ($(this).val() !== "All") {
            // Uncheck "All" if any day is unchecked
            var allCheckbox = $(`#${tabId} input[name="SelectedDays"][value="All"]`);
            if (allCheckbox.is(':checked')) {
                allCheckbox.prop('checked', false);
            }
        }
        
        var activeTabId = $('.nav-tabs .nav-link.active').attr('id').replace('-tab', '');
        updateSelectedDays(activeTabId);
    });
}

// Function to handle channel changes for any tab
function handleChannelChange(tabId) {
    $(`#${tabId} [name='ChannelId']`).change(function(){
        var activeTabId = $('.nav-tabs .nav-link.active').attr('id').replace('-tab', '');
        loadTabData(activeTabId);
    });
}



    </script>
}
